 

## HTTP 상태 코드

- **HTTP 상태코드 소개**
  - 클라이언트가 보낸 요청의 처리 상태를 응답에서 알려주는 기능
- **2xx - 성공**
  - `200 OK` - 요청 성공
  - `201 Created` - 요청 성공해서 새로운 리소스가 생성됨
    - 리소스는 헤더의 `Location`으로 식별
  - `202 Accepted` - 요청이 접수되었으나 처리되지 않음
    - 잘안씀
    - ex) 배치 처리 등
  - `204 No Content` - 서버가 요청을 성공적으로 수행했지만, 응답 페이로드 본문에 보낼 데이터가 없음
    - ex) 웹 문서 편집기에서 save 버튼
- **3xx - 리다이렉션1**
  - 요청을 완료하기 위해 유저 에이전트의 추가 조치 필요
  - 리다이렉션
    - 3xx 응답 결과에 Location헤더가 있으면 해당 페이지로 자동 이동
    - 영구 리다이렉션 - 특정 리소스의 URI가 영구적 이동
      - 원래 URL 사용x, 검색 엔진 등에서 변경 인지
      - `301 Moved Permanently` - 리다이렉트 요청 메서드가 `GET`으로 변화하고, 본문이 제거될 수 있음(body)
      - `308 Permanent Redirect` - 요청 메서드와 본문 유지, 301과 기능은 같음
        - 잘 안씀
- **3xx - 리다이렉션2**
  - 일시 리다이렉션 - 일시적인 변경
    - 검색 엔진 등에서 URL을 변경하면 안됨
    - `302 Found` - 요청 메서드가 `GET`으로 변할 수 있고, 본문이 제거될 수 있음
    - `307 Temporary Redirection`
      - `302` 와 기능은 같음
      - 요청 메서드와 본문 유지(요청 메서드를 변경하면 안됨)
    - `303 See Other`
      - `302`와 기능은 같음
      - 리다이렉트 요청 메서드가 `GET`으로 변경되어야 함
    - 예시 `PRG: Post/Redirect/Get`
      - `POST` 주문 후에 웹브라우저를 새로 고침하면 중복 요청될 수 있음
      - 주문 결과 화면을 `GET`으로 리다이렉트
      - 중복 주문 대신 결과 화면만 `GET`으로 요청
    - `302`를 주로 사용
  - 특수 리다이렉션 - 결과 대신 캐시에서 대신 조회
    - `300 Multiple Choices` - 안씀
    - `304 Not Modified` - 캐시를 목적으로 사용
      - 로컬 PC의 캐시를 사용하여 캐시로 리다이렉트
      - 응답에 메시지 바디 포함하면 안됨
      - 조건부 `GET`, `HEAD` 요청시 사용 
- **4xx - 클라이언트 오류, 5xx - 서버 오류**
  - 4xx(Client Error)
    - 오류의 원인이 클라이언트에 있음
    - `400 Bad Request` - 요청 구문, 메시지 등등 오류
      - ex) 요청 파라미터나 API 스펙이 맞지 않을 때
    - `401 Unauthorized` - 인증되지 않음
      - 오류 발생시 응답에 `WWW-Authenticate` 헤더와 함께 인증 방법을 설명
      - 참고
        - `인증(Authentication)` - 본인이 누구인지 확인(로그인)
        - `인가(Authorization)` - 권한부여
        - 오류 메시지는 `Unauthorized`이지만 인증되지 않았다는 메시지임
    - `403 Forbidden` - 서버가 요청을 이해했지만 승인을 거부
      - 주로 인증 자격은 있지만 권한 없을 때
    - `404 Not Found` - 요청 리소스를 찾을 수 없음
      - 또는 클라이언트가 권한이 부족한 리소스에 접근할 때
  - 5xx(Server Error)
    - 오류의 원인이 서버에 있음
    - 재시도 하면 성공할 수도 있음(복구가 되거나 등등)
    - `500 Internal Server Error`
      -  서버 내부 오류
    - `503 Service Unavailable` - 서버가 일시적인 과부하 또는 예정된 작업으로 잠시 요청 처리 불가
      - `Retry-After` 헤더 필드로 서버 재개 시간 보낼 수 있음
    - 웬만하면 500대 오류는 진짜 서버 오류가 있을 때 보내자