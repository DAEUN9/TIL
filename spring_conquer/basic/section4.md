## 스프링 컨테이너와 스프링 빈

- **스프링 컨테이너 생성**

  - `ApplicationContext`는 인터페이스 -> 다형성
  - 스프링 컨테이너를 생성할 때는 구성 정보를 지정해주어야 한다.
    - ex) `AppConfig.class`

  1. 스프링 컨테이너 생성
  2. 스프링 빈 등록
     - 빈 이름 : 빈 객체로 스프링 빈 저장소에 등록
  3. 스프링 빈 의존관계 설정 - 준비
  4. 스프링 빈 의존관계 설정- 완료
     - 단순히 자바 코드를 호출하는 것이 아닌 차이가 있음 -> 싱글톤 컨테이너

  - 실제로는 생성자 호출시 의존관계 주입이 한번에 처리되지만 개념적으로 나누어 설명

- **컨테이너에 등록된 모든 빈 조회**

- **스프링 빈 조회 - 기본**

  - `ac.getBean(빈이름, 타입)`
  - `ac.getBean(타입)`
    - 구체 타입으로 조회해도 조회가 되나 인터페이스로 조회하는 것이 좋음 -> 유연성

- **스프링 빈 조회 - 동일한 타입이 둘 이상**

  - 같은 타입의 스프링 빈이 둘 이상이면 오류
    - 빈 이름을 지정해줘야 함
  - 테스트 안에 `@Configuration`을 쓰는 것은 그 테스트 안에서만 빈을 사용한다는 의미

  - `getBeansOfType(타입)`으로 특정 타입을 모두 `키:값` 형태로 조회

- **스프링 빈 조회 - 상속 관계**

  - 부모 타입으로 조회하면, 자식 타입도 함께 조회
  - 모든 자바 객체의 최고 부모인 `Object`타입으로 조회를 하면, 모든 스프링 빈을 조회
  - 부모 타입으로 조회시, 자식이 둘 이상 있으면, 중복 오류 발생 -> 이름 지정 필요

- **BeanFactory와 ApplicationContext**

  - `BeanFactory`
    - 스프링 컨테이너의 최상위 인터페이스
    - 스프링 빈을 관리하고 조회
    - `getBean()` 제공
  - `ApplicationContext`
    - `BeanFactory` 기능을 모두 상속받아 사용
    - 부가기능 제공
      - 메시지소스를 활용한 국제화 기능
      - 환경변수
        - 로컬, 개발, 운영 등 구분 처리
      - 애플리케이션 이벤트
      - 편리한 리소스 조회
  - 부가기능이 포함된 `ApplicationContext`를 주로 사용

- **다양한 설정 형식 지원 - 자바 코드, XML**

  - 스프링 컨테이너는 다양한 형식의 설정 정보를 받아드릴 수 있게 유연하게 설계되어 있음
  - 애노테이션 기반 자바 코드 설정 사용
    - 위에서 했던 것
  - XML 설정 사용
    - 레거시 코드에선 아직 사용
    - 컴파일 없이 빈 설정 정보를 변경 가능

- **스프링 빈 설정 메타 정보 - BeanDefinition**

  - 역할과 구현을 개념적으로 나눈 것
  - 스프링 컨테이너는 자바 코드인지, XML인지 몰라도 된다. 오직`BeanDefinition`만 알면 됨
  - 빈 설정 메타 정보라고 함
    - `@Bean`, `<Bean>`당 각각 하나의 메타 정보가 생성됨